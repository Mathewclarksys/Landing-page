<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sniper Bot Dashboard</title>
  <style>
    body {
      background: #232334;
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .main-layout {
      display: flex;
      align-items: flex-start;
      height: 100vh;
      box-sizing: border-box;
    }
    .sniper-bot-container {
      width: 400px;
      margin: 32px 0 32px 32px;
      height: calc(100vh - 64px);
      box-sizing: border-box;
      border-radius: 16px;
      padding: 24px 18px 24px 18px;
      background: linear-gradient(180deg, #232344 0%, #1b2a3a 100%);
      box-shadow: 0 4px 24px rgba(0,0,0,0.3);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      overflow: hidden;
    }
    .sniper-bot-container h2 {
      color: #6fffb0;
      font-size: 1.1rem;
      margin-bottom: 18px;
      font-weight: 600;
    }
    .label {
      color: #b2ffea;
      font-size: 0.97rem;
      margin-bottom: 4px;
      display: block;
      font-weight: 500;
    }
    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .sniper-select,
    .sniper-input {
      width: 100%;
      box-sizing: border-box;
      background: #29295a;
      border: none;
      border-radius: 6px;
      color: #fff;
      padding: 10px 12px;
      font-size: 1rem;
      margin-bottom: 0;
    }
    .sniper-bot-container .single-input {
      margin-bottom: 16px;
    }
    .switch-row {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    .switch-label {
      color: #b2ffea;
      margin-left: 8px;
      font-size: 0.97rem;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 38px;
      height: 20px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      border-radius: 20px;
      transition: .3s;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: #fff;
      border-radius: 50%;
      transition: .3s;
    }
    .switch input:checked + .slider {
      background-color: #6fffb0;
    }
    .switch input:checked + .slider:before {
      transform: translateX(18px);
    }
    .sniper-bot-container button {
      width: 100%;
      background: #a259ff;
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 12px 0;
      font-size: 1rem;
      margin-top: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .sniper-bot-container button:hover {
      background: #7c43bd;
    }
    .status {
      color: #6fffb0;
      text-align: center;
      margin: 18px 0 10px 0;
      font-size: 0.98rem;
    }
    .divider {
      border: none;
      border-top: 1.5px solid #b2ffea;
      margin: 12px 0;
    }

    /* WALLET INFO BOX */
    .wallet-info-box {
      background: none;
      margin-top: 18px;
      padding: 0;
    }
    .wallet-info-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(90deg, #7b2ff2 0%, #00eaff 100%);
      border-radius: 10px;
      padding: 8px 16px 8px 10px;
      cursor: pointer;
      user-select: none;
    }
    .wallet-info-icon {
      width: 18px;
      height: 18px;
      border: 2px solid #00ffe0;
      border-radius: 3px;
      display: inline-block;
      margin-right: 10px;
      box-sizing: border-box;
      background: transparent;
      position: relative;
    }
    .wallet-info-icon::before {
      content: '';
      display: block;
      width: 10px;
      height: 6px;
      border-radius: 1px;
      background: #00ffe0;
      position: absolute;
      left: 3px;
      top: 5px;
      opacity: 0.7;
    }
    .wallet-info-title {
      color: #00ffe0;
      font-weight: bold;
      font-size: 1.08rem;
      flex: 1;
      text-align: center;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 4px #23234444;
    }
    .wallet-info-arrow {
      color: #00ffe0;
      font-size: 1.2rem;
      margin-left: 10px;
      transition: transform 0.2s;
    }
    .wallet-info-header.open .wallet-info-arrow {
      transform: rotate(180deg);
    }
    .wallet-info-status {
      color: #fff;
      font-size: 1rem;
      margin-top: 8px;
      margin-left: 2px;
      font-weight: 500;
      transition: color 0.2s;
      padding-left: 8px;
    }
    .wallet-info-status.connected {
      color: #00ff99;
    }

    .wallet-row {
      display: none;
    }

    .rocket-icon {
      display: flex;
      align-items: center;
      margin-right: 4px;
    }

    /* MIDDLE PANEL */
    .middle-panel {
      width: 340px;
      margin: 32px 0 32px 24px;
      background: #232344;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.3);
      color: #fff;
      display: flex;
      flex-direction: column;
      gap: 18px;
      box-sizing: border-box;
      padding: 18px 12px 18px 12px;
    }
    .top-box {
      background: #232344;
      border-radius: 12px;
      padding: 18px 18px 12px 18px;
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
      align-items: stretch;
    }
    .icon-row {
      display: flex;
      justify-content: center;
      margin-bottom: 6px;
    }
    .private-key-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      margin-bottom: 4px;
    }
    .private-key-input {
      width: 100%;
      background: #232344;
      border: 2px solid #6fffb0;
      border-radius: 8px;
      padding: 12px 40px 12px 14px;
      font-size: 1.1rem;
      color: #fff;
      outline: none;
      margin-bottom: 0;
      box-shadow: 0 0 8px #6fffb0;
      transition: border 0.2s, box-shadow 0.2s;
    }
    .private-key-input:focus {
      border: 2px solid #00ff99;
      box-shadow: 0 0 12px #00ff99;
    }
    .eye-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      padding: 0;
      cursor: pointer;
      outline: none;
      display: flex;
      align-items: center;
      transition: opacity 0.2s;
      z-index: 2;
    }
    .eye-btn svg {
      display: inline-block;
      vertical-align: middle;
      transition: opacity 0.2s;
    }
    .eye-btn:active svg {
      opacity: 0.7;
    }
    .stats-list {
      font-size: 1rem;
      margin-bottom: 8px;
      font-weight: bold;
      color: #fff;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .stats-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-width: 0;
    }
    .stats-label {
      color: #fff;
      font-weight: bold;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .stats-value {
      color: #fff;
      font-weight: bold;
      margin-left: 12px;
      text-align: right;
      white-space: nowrap;
    }
    .stats-value.yellow {
      color: #ffe600;
    }
    .stats-value.green {
      color: #00ff99;
    }
    .green-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      background: #00ff99;
      border-radius: 50%;
      margin-right: 4px;
      vertical-align: middle;
    }
    .theme-select {
      width: 100%;
      background: #29295a;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 10px;
      font-size: 1rem;
      margin-top: 8px;
    }
    .guest-box {
      background: #23233a;
      border-radius: 12px;
      padding: 18px 0;
      text-align: center;
      margin-bottom: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .guest-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .guest-icon {
      font-size: 2.2rem;
      margin-bottom: 8px;
      color: #fff;
    }
    .guest-label {
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .win-lose {
      font-size: 1rem;
    }
    .win { color: #00ff99; }
    .lose { color: #ff5252; }
    .summary-box {
      background: #23233a;
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 1rem;
      color: #fff;
      margin-bottom: 10px;
    }
    .cyan { color: #00e6ff; }
    .telegram-box {
      background: #23233a;
      border-radius: 8px;
      padding: 10px 10px;
      font-size: 1rem;
      color: #00e6ff;
      margin-top: auto;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .telegram-icon {
      font-size: 1.3rem;
    }
    .telegram-label {
      color: #00e6ff;
      font-weight: bold;
    }
    .telegram-link {
      color: #00e6ff;
      text-decoration: none;
      font-weight: bold;
    }

    /* RIGHT PANEL */
    .dashboard-panel {
      flex: 1;
      margin: 32px 32px 32px 24px;
      height: calc(100vh - 64px);
      background: #23233a;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      color: #fff;
      min-width: 0;
    }
    .dashboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: #232344;
      border-radius: 16px 16px 0 0;
      border-bottom: 2px solid #29295a;
    }
    .dashboard-header .status-bar {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .dashboard-header .status-bar span {
      background: #00ff99;
      border-radius: 4px;
      padding: 4px 12px;
      font-size: 0.95rem;
      font-weight: 600;
      color: #232344;
    }
    .dashboard-header .progress-bar-fg {
      background:#232344;
      height:100%;
      width
      position: absolute;
      left: 0;
      top: 0;
    }
    .dashboard-header .stop-btn {
      background: #ff4081;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 8px 28px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    .dashboard-header .stop-btn:hover {
      background: #d81b60;
    }
    .dashboard-warning {
      background: #b71c1c;
      color: #fff;
      padding: 10px 24px;
      margin: 0 0 12px 0;
      border-radius: 8px;
      font-weight: bold;
      border: 2px solid #ff5252;
      font-size: 1rem;
    }
    .dashboard-table-container {
      flex: 1;
      overflow-y: auto;
      padding: 0 16px 16px 16px;
    }
    table.dashboard-table {
      width: 100%;
      border-collapse: collapse;
      background: transparent;
      color: #fff;
      font-size: 0.97rem;
    }
    table.dashboard-table th, table.dashboard-table td {
      padding: 10px 8px;
      text-align: left;
      border-bottom: 1px solid #29295a;
    }
    table.dashboard-table th {
      background: #232344;
      font-weight: 600;
    }
    .login-btn {
      background: #ff2222;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 6px 16px;
      font-weight: bold;
      cursor: pointer;
      font-size: 0.97rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .login-btn svg {
      width: 16px;
      height: 16px;
      fill: #fff;
    }
    .dashboard-table-container {
      scrollbar-width: thin;
      scrollbar-color: #29295a #23233a;
    }
    .dashboard-table-container::-webkit-scrollbar {
      width: 8px;
    }
    .dashboard-table-container::-webkit-scrollbar-thumb {
      background: #29295a;
      border-radius: 8px;
    }
    .dashboard-table-container::-webkit-scrollbar-track {
      background: #23233a;
    }
    .private-key-input {
      width: 100%;
      box-sizing: border-box;
      display: block;
    }
    .eye-btn {
      background: transparent;
      border: none;
      padding: 0;
      cursor: pointer;
      outline: none;
      display: flex;
      align-items: center;
      transition: opacity 0.2s;
    }
    .eye-btn svg {
      display: inline-block;
      vertical-align: middle;
      transition: opacity 0.2s;
    }
    .eye-btn:active svg {
      opacity: 0.7;
    }
    .typewriter {
      font-weight: bold;
      font-size: 1.1rem;
      color: #232344;
      letter-spacing: 1px;
      position: relative;
      min-width: 1em;
    }
    .typewriter .cursor {
      display: inline-block;
      color: #232344;
      font-weight: bold;
      font-size: 1.1rem;
      animation: blink 1s steps(1) infinite;
      vertical-align: baseline;
      margin-left: 0;
    }
    @keyframes blink {
      0%, 60% { opacity: 1; }
      61%, 100% { opacity: 0; }
    }

    /* INLINE SPINNER FOR STATUS BAR */
    .spinner-inline {
      width: 22px;
      height: 22px;
      border: 3px solid #00ff99;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 8px;
      display: inline-block;
      vertical-align: middle;
    }

    /* LOADING SCREEN */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(35, 35, 52, 0.9);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid #00eaff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    .loading-text {
      margin-top: 12px;
      font-size: 1.1rem;
      font-weight: 500;
      text-align: center;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .or-text {
      text-align: center;
      color: #fff;
      margin: 4px 0 4px 0;
      font-size: 16px;
      opacity: 0.7;
    }
    .connect-wallet-btn {
      display: block;
      width: 100%;
      background: #00e0ff;
      color: #000;
      border: none;
      border-radius: 8px;
      padding: 12px 0;
      font-size: 18px;
      font-weight: bold;
      margin-top: 4px;
      margin-bottom: 15px;
      cursor: pointer;
    }
    .wallet-x-icon {
      display: inline-block;
      width: 22px;
      height: 22px;
      border-radius: 5px;
      background: transparent;
      position: relative;
      vertical-align: middle;
    }
    .wallet-x-icon::before, .wallet-x-icon::after {
      content: '';
      position: absolute;
      left: 9px;
      top: 4px;
      width: 4px;
      height: 14px;
      background: #ff5252;
      border-radius: 2px;
    }
    .wallet-x-icon::before {
      transform: rotate(45deg);
    }
    .wallet-x-icon::after {
      transform: rotate(-45deg);
    }
    #save-custom-rpc-btn {
      display: none;
      width: 100%;
      background: linear-gradient(90deg, #00eaff 0%, #7b2ff2 100%);
      color: #fff;
      font-weight: bold;
      border-radius: 8px;
      padding: 12px 0;
      font-size: 1.05rem;
      margin-top: 8px;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      letter-spacing: 0.5px;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
    }
    #save-custom-rpc-btn:hover, #save-custom-rpc-btn:focus {
      background: linear-gradient(90deg, #7b2ff2 0%, #00eaff 100%);
      box-shadow: 0 4px 16px rgba(0,0,0,0.18);
      transform: translateY(-2px) scale(1.03);
      outline: none;
    }
  </style>
</head>
<body>
  <div class="main-layout">
    <!-- LEFT PANEL: Sniper Bot Settings -->
    <div class="sniper-bot-container">
      <h2>Customize your sniper bot parameters</h2>
      <label class="label">Purchase Amount Range (SOL)</label>
      <div class="input-row">
        <input class="sniper-input" type="number" step="0.01" value="0.1">
        <input class="sniper-input" type="number" step="0.01" value="0.2">
      </div>
      <label class="label">Transaction Executor</label>
      <select class="sniper-select single-input" id="executor-select">
        <option>Jito (Recommended)</option>
        <option>Dexscreener</option>
        <option>1Inch</option>
        <option>Custom RPC</option>
      </select>
      <div id="custom-rpc-fields" style="display:none; margin-bottom:16px; margin-top:8px;">
        <input class="sniper-input" type="text" placeholder="Custom RPC Endpoint (https://...)" id="custom-rpc-endpoint" style="margin-bottom:8px;">
        <input class="sniper-input" type="text" placeholder="WSS Endpoint (wss://...)" id="custom-wss-endpoint" style="margin-bottom:8px;">
        <input class="sniper-input" type="text" placeholder="RPC Name" id="custom-rpc-name" style="margin-bottom:8px;">
        <button id="save-custom-rpc-btn">Save</button>
      </div>
      <label class="label">Purchase Interval (seconds)</label>
      <div class="input-row">
        <input class="sniper-input" type="number" step="0.01" value="0.1">
        <input class="sniper-input" type="number" step="0.01" value="0.5">
      </div>
      <label class="label">Max Dev Allocation (%)</label>
      <div class="single-input">
        <select class="sniper-select">
          <option>30%</option>
          <option>25%</option>
          <option>20%</option>
          <option>15%</option>
          <option>10%</option>
        </select>
      </div>
      <label class="label">Buy Slippage (%)</label>
      <div class="single-input">
        <input class="sniper-input" type="number" value="5">
      </div>
      <label class="label">Purchase Speed</label>
      <select class="sniper-select single-input">
        <option>Instant (0.01–0.09s)</option>
        <option>Fast (0.10–0.20s)</option>
        <option>Standard (0.21–0.29s)</option>
      </select>
      <div class="switch-row">
        <label class="switch">
          <input type="checkbox">
          <span class="slider"></span>
        </label>
        <span class="switch-label">Enable Advanced Auto-Sell</span>
      </div>
      <label class="label">Take Profit (%)</label>
      <input class="sniper-input single-input" type="number" value="30">
      <label class="label">Stop Loss (%)</label>
      <input class="sniper-input single-input" type="number" value="10">
      <button>
        <span class="rocket-icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <g>
              <path d="M10 2C13 2 16 5 16 8C16 11 13 14 10 14C7 14 4 11 4 8C4 5 7 2 10 2Z" fill="#fff"/>
              <path d="M10 14V18" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              <path d="M8 18H12" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              <circle cx="10" cy="8" r="2" fill="#a259ff"/>
            </g>
          </svg>
        </span>
        Launch Trading Bot
      </button>
      <div class="status">● Connected to Solana Mainnet</div>
      <hr class="divider">

      <!-- WALLET INFO BOX -->
      <div class="wallet-info-box">
        <div class="wallet-info-header" id="wallet-info-toggle">
          <span class="wallet-info-icon"></span>
          <span class="wallet-info-title">Wallet Information</span>
          <span class="wallet-info-arrow" id="wallet-info-arrow">&#9660;</span>
        </div>
        <div class="wallet-info-status" id="wallet-info-status" style="display:none;">Not connected</div>
      </div>
    </div>

    <!-- MIDDLE PANEL: Info/User/Stats -->
    <div class="middle-panel">
      <div class="top-box">
        <div class="icon-row">
          <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="key" width="36" height="36">
        </div>
        <div class="private-key-wrapper">
          <input class="private-key-input" type="password" placeholder="Private Key" id="private-key-input" autocomplete="off">
          <button type="button" class="eye-btn" id="toggle-private-key" aria-label="Show/Hide Private Key">
            <span id="private-key-eye-icon">
              <!-- Eye closed SVG (default) -->
              <svg width="22" height="22" viewBox="0 0 20 20" fill="none">
                <path d="M2 2L18 18" stroke="#00eaff" stroke-width="2"/>
                <path d="M1 10C3 5 7 2 10 2C13 2 17 5 19 10C17 15 13 18 10 18C7 18 3 15 1 10Z" stroke="#00eaff" stroke-width="2"/>
                <circle cx="10" cy="10" r="3" fill="#00eaff"/>
              </svg>
            </span>
          </button>
        </div>
        <div class="or-text">or</div>
        <button class="connect-wallet-btn" id="phantom-connect-btn">Connect Wallet</button>
        <div class="stats-list">
          <div class="stats-row">
            <span class="stats-label">CPU:</span>
            <span class="stats-value">51.3%</span>
          </div>
          <div class="stats-row">
            <span class="stats-label">Memory:</span>
            <span class="stats-value">179MB</span>
          </div>
          <div class="stats-row">
            <span class="stats-label">Network:</span>
            <span class="stats-value">9.1ms</span>
          </div>
          <div class="stats-row">
            <span class="stats-label">Buy time:</span>
            <span class="stats-value">0.01s - 0.09s</span>
          </div>
          <div class="stats-row">
            <span class="stats-label">Wallet:</span>
            <span class="stats-value yellow">0.00 SOL</span>
          </div>
          <div class="stats-row">
            <span class="stats-label">
              <span class="green-dot"></span>
              Address:
            </span>
            <span class="stats-value green" id="wallet-address">
              <span class="wallet-x-icon"></span>
            </span>
          </div>
        </div>
        <select class="theme-select">
          <option>Theme 1 - Cyber Blue</option>
        </select>
      </div>
      <div class="guest-box">
        <div class="guest-inner">
          <span class="guest-icon">&#128100;</span>
          <div class="guest-label">Guest User</div>
          <div class="win-lose">
            <span class="win">Win: 0.00%</span> | <span class="lose">Lose: 0.00%</span>
          </div>
        </div>
      </div>
      <div class="summary-box">
        Losing: <span class="lose">0.00 SOL</span> / Win: <span class="win">0.00 SOL</span><br>
        Profit: <span class="yellow">0.00 SOL</span><br>
        Fee: <span class="yellow">0.00 SOL</span><br>
        Bought/Sold: <span class="cyan">26/26</span>
      </div>
      <div class="telegram-box">
        <span class="telegram-icon">&#128172;</span>
        <span class="telegram-label">Telegram:</span>
        <a href="https://t.me/snip_support" target="_blank" class="telegram-link">@snip_support</a>
      </div>
    </div>

    <!-- RIGHT PANEL: Dashboard/Table -->
    <div class="dashboard-panel">
      <div class="dashboard-header">
        <div class="status-bar">
          <div class="spinner-inline" id="status-spinner"></div>
          <span id="working-typewriter" class="typewriter"></span>
          <div class="progress-bar-bg">
          </div>
        </div>
        <button class="stop-btn">STOP</button>
      </div>
      <div class="dashboard-warning">
        Not enough privileges. Slow mode ON.<br>
        Trial time remaining: 64 seconds
      </div>
      <div class="dashboard-table-container">
        <table class="dashboard-table">
          <thead>
            <tr>
              <th>Name / Symbol / Address</th>
              <th>Launch</th>
              <th>BOUGHT<br>Speed/Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <!-- Will be filled by JS -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- LOADING SCREEN -->
  <div id="loading-screen" class="loading-screen">
    <div class="spinner"></div>
    <div class="loading-text">Loading...</div>
  </div>

  <script>
const pkInput = document.getElementById('private-key-input');
const pkToggle = document.getElementById('toggle-private-key');
const pkEyeIcon = document.getElementById('private-key-eye-icon');

let pkShown = false;
pkToggle.addEventListener('click', () => {
  pkShown = !pkShown;
  pkInput.type = pkShown ? 'text' : 'password';
  pkEyeIcon.innerHTML = pkShown
    // Eye open SVG
    ? `<svg width="22" height="22" viewBox="0 0 20 20" fill="none">
        <path d="M1 10C3 5 7 2 10 2C13 2 17 5 19 10C17 15 13 18 10 18C7 18 3 15 1 10Z" stroke="#00eaff" stroke-width="2"/>
        <circle cx="10" cy="10" r="3" fill="#00eaff"/>
      </svg>`
    // Eye closed SVG
    : `<svg width="22" height="22" viewBox="0 0 20 20" fill="none">
        <path d="M2 2L18 18" stroke="#00eaff" stroke-width="2"/>
        <path d="M1 10C3 5 7 2 10 2C13 2 17 5 19 10C17 15 13 18 10 18C7 18 3 15 1 10Z" stroke="#00eaff" stroke-width="2"/>
        <circle cx="10" cy="10" r="3" fill="#00eaff"/>
      </svg>`;
});
  </script>
  <script>
// Typewriter effect with no glitch
const typewriterText = "Working...";
const typewriterEl = document.getElementById("working-typewriter");
let typeIndex = 0;
let typingForward = true;

function typewriterLoop() {
  typewriterEl.innerHTML = typewriterText.slice(0, typeIndex) + '<span class="cursor">|</span>';
  if (typingForward) {
    if (typeIndex < typewriterText.length) {
      typeIndex++;
      setTimeout(typewriterLoop, 120);
    } else {
      typingForward = false;
      setTimeout(typewriterLoop, 1000);
    }
  } else {
    if (typeIndex > 0) {
      typeIndex--;
      setTimeout(typewriterLoop, 60);
    } else {
      typingForward = true;
      setTimeout(typewriterLoop, 400);
    }
  }
}
typewriterLoop();
</script>
<script>
window.addEventListener('DOMContentLoaded', function() {
  setTimeout(function() {
    document.getElementById('loading-screen').style.display = 'none';
  }, 5000); // 5 seconds
});
</script>
<script>
document.getElementById('phantom-connect-btn').addEventListener('click', async function() {
  const btn = this;
  if (window.solana && window.solana.isPhantom) {
    try {
      const resp = await window.solana.connect();
      // Truncate address for display
      const fullAddress = resp.publicKey.toString();
      const shortAddress = fullAddress.slice(0, 4) + '...' + fullAddress.slice(-4);
      document.getElementById('wallet-address').textContent = shortAddress;
      // Update wallet info box (show short address here too)
      const walletStatus = document.getElementById('wallet-info-status');
      walletStatus.textContent = shortAddress;
      walletStatus.classList.add('connected');
      walletStatus.style.display = 'block';
      document.getElementById('wallet-info-arrow').innerHTML = '&#9650;';
      document.getElementById('wallet-info-toggle').classList.add('open');
      // Change button text and disable it
      btn.textContent = 'Wallet Connected';
      btn.disabled = true;
      btn.style.background = '#00ff99';
      btn.style.color = '#232344';
    } catch (err) {
      alert('Connection to Phantom failed: ' + err.message);
    }
  } else {
    alert('Phantom Wallet not found. Please install it from https://phantom.app/');
  }
});
// Toggle wallet info (collapse/expand)
document.getElementById('wallet-info-toggle').addEventListener('click', function() {
  const status = document.getElementById('wallet-info-status');
  const arrow = document.getElementById('wallet-info-arrow');
  if (status.style.display === 'none' || status.style.display === '') {
    status.style.display = 'block';
    arrow.innerHTML = '&#9650;';
    this.classList.add('open');
  } else {
    status.style.display = 'none';
    arrow.innerHTML = '&#9660;';
    this.classList.remove('open');
  }
});
const customFields = document.getElementById('custom-rpc-fields');
const rpcEndpoint = document.getElementById('custom-rpc-endpoint');
const wssEndpoint = document.getElementById('custom-wss-endpoint');
const rpcName = document.getElementById('custom-rpc-name');
const saveBtn = document.getElementById('save-custom-rpc-btn');

function checkCustomFields() {
  if (
    rpcEndpoint.value.trim() !== '' &&
    wssEndpoint.value.trim() !== '' &&
    rpcName.value.trim() !== ''
  ) {
    saveBtn.style.display = 'block';
  } else {
    saveBtn.style.display = 'none';
  }
}

[rpcEndpoint, wssEndpoint, rpcName].forEach(input => {
  input.addEventListener('input', checkCustomFields);
});

saveBtn.addEventListener('click', function() {
  alert('Custom RPC Name: ' + rpcName.value.trim());
});

document.getElementById('executor-select').addEventListener('change', function() {
  if (this.value === 'Custom RPC') {
    customFields.style.display = 'block';
    checkCustomFields();
  } else {
    customFields.style.display = 'none';
    saveBtn.style.display = 'none';
    rpcEndpoint.value = '';
    wssEndpoint.value = '';
    rpcName.value = '';
  }
});

// Enable Advanced Auto-Sell: auto-select best options
document.querySelector('.switch input').addEventListener('change', function() {
  if (this.checked) {
    // Purchase Amount Range (SOL)
    document.querySelectorAll('.input-row')[0].querySelectorAll('input')[0].value = 0.1;
    document.querySelectorAll('.input-row')[0].querySelectorAll('input')[1].value = 0.2;
    // Transaction Executor to Jito (Recommended)
    document.getElementById('executor-select').selectedIndex = 0;
    // Purchase Interval (seconds)
    document.querySelectorAll('.input-row')[1].querySelectorAll('input')[0].value = 0.1;
    document.querySelectorAll('.input-row')[1].querySelectorAll('input')[1].value = 0.5;
    // Max Dev Allocation (%) to 30%
    document.querySelectorAll('.single-input select')[0].selectedIndex = 0;
    // Buy Slippage (%) to 5
    document.querySelectorAll('.single-input input[type="number"]')[0].value = 5;
    // Purchase Speed to Instant
    document.querySelectorAll('.sniper-select.single-input')[1].selectedIndex = 0;
    // Take Profit (%) to 30
    document.querySelectorAll('.sniper-input.single-input[type="number"]')[1].value = 30;
    // Stop Loss (%) to 10
    document.querySelectorAll('.sniper-input.single-input[type="number"]')[2].value = 10;
  }
});

// Dexscreener API integration for dashboard table
async function updateDexscreenerTokens() {
  try {
    const response = await fetch('https://api.dexscreener.com/token-profiles/latest/v1');
    const tokens = await response.json();

    const tbody = document.querySelector('.dashboard-table tbody');
    tbody.innerHTML = '';

    tokens.slice(0, 10).forEach(token => {
      const name = token.tokenName || token.name || 'Unknown';
      const symbol = token.tokenSymbol || token.symbol || '???';
      const address = token.tokenAddress || token.address || '???';
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>
          ${name} (${symbol})<br>
          <span style="color:#00e6ff;font-size:0.9em;">${address ? address.slice(0,6) + '...' + address.slice(-4) : '???'}</span>
        </td>
        <td>-</td>
        <td>Seen: <span style="color:#ffe600;">API</span></td>
        <td><span style="color:#00ff99;">LIVE</span></td>
      `;
      tbody.appendChild(tr);
    });
  } catch (err) {
    console.error('Failed to fetch tokens:', err);
    const tbody = document.querySelector('.dashboard-table tbody');
    tbody.innerHTML = `<tr><td colspan="4" style="color:#ff5252;">Failed to load tokens from Dexscreener API.</td></tr>`;
  }
}

// Call once on load
updateDexscreenerTokens();
</script>
</body>
</html>
